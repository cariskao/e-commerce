(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-797ac3b2"],{1799:function(t,a,n){"use strict";var o=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next","page-count":t.fullValue.total_pages},on:{"current-change":t.changePage},model:{value:t.fullValue,callback:function(a){t.fullValue=a},expression:"fullValue"}})],1)},e=[],i=(n("cadf"),n("551c"),n("097d"),n("2f62"),{components:{},props:{value:{type:Object,default:function(){return{}}},changePage:{type:Function,default:function(){return""}}},data:function(){return{}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},destroyed:function(){},methods:{handleCurrentChange:function(t){this.$emit("pagination:onChangePage",t)}}}),s=i,c=n("2877"),r=Object(c["a"])(s,o,e,!1,null,null,null);r.options.__file="Pagination.vue";a["a"]=r.exports},"1fc3":function(t,a,n){},"3d4b":function(t,a,n){"use strict";var o=n("91f1"),e=n.n(o);e.a},"729c":function(t,a,n){"use strict";n.r(a);var o=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"customer-order"},[n("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t.isNonEmptyArray(t.products)?[n("div",{staticClass:"customer-order-cart",on:{click:t.openCart}},[n("i",{staticClass:"fas fa-lg fa-cart-plus"}),n("div",{staticClass:"customer-order-cart__num",attrs:{value:t.cartQty}},[t._v(t._s(t.handleCartQty))])]),n("div",{staticClass:"customer-order-content"},[n("div",{staticClass:"customer-order-content__card"},[n("Card",{model:{value:t.products,callback:function(a){t.products=a},expression:"products"}})],1)]),n("Pagination",{staticClass:"customer-order__pagination",attrs:{changePage:t.changePage},model:{value:t.pagination,callback:function(a){t.pagination=a},expression:"pagination"}})]:t._e()],2)},e=[],i=n("cebc"),s=(n("cadf"),n("551c"),n("097d"),n("2f62")),c=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"card-container"},[n("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._l(t.fullValue,function(a){return n("el-card",{key:a.id,staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"card__background",style:{backgroundImage:"url("+a.imageUrl+")"}}),n("div",{staticClass:"card-info"},[n("div",{staticClass:"form__row card-info__item"},[n("span",[t._v(t._s(a.title))]),n("el-tag",{attrs:{size:"medium",type:"info"}},[t._v(t._s(a.category))])],1),n("div",{staticClass:"form__row card-info__item"},[n("p",[t._v(t._s(a.description))])]),n("div",{staticClass:"form__row card-info__item"},[n("h4",{staticClass:"card-info__item__original-price"},[t._v("原價：$"+t._s(1.8*parseInt(a.price)))]),n("span",[t._v("售價： $"+t._s(a.price))])]),n("div",{staticClass:"form__row"},[n("Button",{staticClass:"card-info__btn",attrs:{btnName:"了解更多"},nativeOn:{click:function(n){t.openModal(a.id)}}}),n("Button",{staticClass:"card-info__btn",attrs:{colorType:"special",btnName:"加入購物車"},nativeOn:{click:function(n){t.addToCart(a.id,a.num)}}})],1)])])})],2)},r=[],u=n("3398"),d="".concat("https://vue-course-api.hexschool.io/","api/").concat("leochuang","/product/"),l="".concat("https://vue-course-api.hexschool.io/","api/leochuang/cart"),f={components:{Button:u["a"]},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{showModal:!1,product:{},cartLength:"",isLoading:!1}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},methods:Object(i["a"])({},Object(s["b"])(["setModalData","setModal"]),{openModal:function(t){var a=this;this.showModal=!0,this.isLoading=!0,this.$http.get("".concat(d).concat(t)).then(function(t){if(t.data.success){var n=t.data.product;a.product=a.deepCopy(n),a.setModalData(a.product),a.setModal("CardModal"),a.isLoading=!1}else alert("請先登入，以利取得資料"),a.$router.push({name:"login"}),a.isLoading=!1})},addToCart:function(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.$http.post(l,{data:{product_id:t,qty:n}}).then(function(){a.showModal=!1,a.$root.$emit("Card:refresh"),a.isLoading=!1,a.notifySuccess("成功加入購物車")})},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})}})},p=f,h=(n("3d4b"),n("2877")),g=Object(h["a"])(p,c,r,!1,null,null,null);g.options.__file="Card.vue";var v=g.exports,_=n("1799"),m="https://vue-course-api.hexschool.io/api/leochuang/cart",C={components:{Card:v,Pagination:_["a"]},props:{productApi:{type:String,default:function(){return"".concat("https://vue-course-api.hexschool.io/","api/").concat("leochuang","/admin/products")}}},data:function(){return{products:[],pagination:{},cartQty:"",isLoading:!1}},computed:{handleCartQty:function(){return this.cartQty>9?"9+":this.cartQty}},watch:{cartQty:function(t){t?this.getCartData():this.cartQty}},created:function(){var t=this;this.getProducts(),this.getCartData(),this.$root.$on("Card:refresh",function(){t.getCartData()}),this.$root.$on("CartModal:refresh",function(){t.getCartData()}),this.$root.$on("CardModal:refresh",function(){t.getCartData()})},mounted:function(){},destroyed:function(){this.$root.$off("Card:refresh"),this.$root.$off("CartModal:refresh"),this.$root.$off("CardModal:refresh")},methods:Object(i["a"])({},Object(s["b"])(["setModal"]),{getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat(this.productApi,"?page=").concat(a)).then(function(a){if(a.data.success){var n=a.data,o=n.products,e=n.pagination;t.products=t.deepCopy(o),t.pagination=e,t.isLoading=!1,t.$root.$emit("CustomerOrder:Loading",t.isLoading)}else alert("請先登入，以利取得資料"),t.$router.push({name:"login"}),t.isLoading=!1})},getCartData:function(){var t=this;this.$http.get(m).then(function(a){return t.cartQty=a.data.data.carts.length})},changePage:function(t){this.getProducts(t)},showModal:function(){this.setModal("CartModal")},openCart:function(){this.showModal()}})},y=C,$=(n("f13d"),Object(h["a"])(y,o,e,!1,null,null,null));$.options.__file="CustomerOrder.vue";a["default"]=$.exports},"91f1":function(t,a,n){},f13d:function(t,a,n){"use strict";var o=n("1fc3"),e=n.n(o);e.a}}]);
//# sourceMappingURL=chunk-797ac3b2.f623f89a.js.map